<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Map Exercise</title>
    <script src='https://api.mapbox.com/mapbox-gl-js/v2.6.1/mapbox-gl.js'></script>
    <link href='https://api.mapbox.com/mapbox-gl-js/v2.6.1/mapbox-gl.css' rel='stylesheet' />
    <script src="https://code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>
</head>
<body>
<style>
    .mapboxgl-popup {
        max-width: 400px;
        font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;
    }
</style>
<div id='map' style='width: 400px; height: 300px;'></div>
<script src ="js/keys.js"></script>
<script>
    // mapboxgl.accessToken = MAPBOX_KEY;
    // const map = new mapboxgl.Map({
    //     container : 'map',
    //     style: 'mapbox://styles/mapbox/streets-v11',
    //     center: [-98.4683, 29.5312],
    //     zoom: 8
    // });
    // [-93.4356791, 45.0931144] location for PF Chang's
    //
    // Generate a map that shows the city with your favorite restaurant using geocoding.


    function geocode(search, token) {
        var baseUrl = 'https://api.mapbox.com';
        var endPoint = '/geocoding/v5/mapbox.places/';
        return fetch(baseUrl + endPoint + encodeURIComponent(search) + '.json' + "?" + 'access_token=' + token)
            .then(function (res) {
                return res.json();
                // to get all the data from the request, comment out the following three lines...
            // }).then(function (data) {
            //     return data.features[0].center;

            });
    }
geocode("12071 Elm Creek Blvd.\n" +
    "Maple Grove, MN 55369", MAPBOX_KEY).then(function(results){
    console.log(results)
})
//    Redraw the map of the above location at zoom levels 5, 15, and 20. Do this by simply changing the value of
    //    zoom level where the map properties are initially set and refresh the page to see the changes.
    //    Can the zoom be changed programmatically after the initial map is drawn?

    // mapboxgl.accessToken = MAPBOX_KEY;
    // const map = new mapboxgl.Map({
    //     container : 'map',
    //     style: 'mapbox://styles/mapbox/streets-v11',
    //     center: [-93.4356791, 45.0931144],
    //     zoom: 5
    // });

    mapboxgl.accessToken = MAPBOX_KEY;
    const map = new mapboxgl.Map({
        container : 'map',
        style: 'mapbox://styles/mapbox/streets-v11',
        center: [-93.4336791, 45.0931112],
        zoom: 17
    });

    // mapboxgl.accessToken = MAPBOX_KEY;
    // const map = new mapboxgl.Map({
    //     container : 'map',
    //     style: 'mapbox://styles/mapbox/streets-v11',
    //     center: [-93.4356791, 45.0931144],
    //     zoom: 20
    // });

//    Create a marker on your map of the exact location of your favorite restaurant set the zoom to allow for best viewing distance.

var pf = new mapboxgl.Marker({
    color: 'black',
}).setLngLat([-93.4336791, 45.0931112])
    .addTo(map)

//    Create a popup with the name of the restaurant.
//     var poppin = new mapboxgl.Popup()
//         .setLngLat(pf.getLngLat())
//     .setHTML("<h4>PF Chang's</h4>")
//     .addTo(map)

//    Make sure the info window does not display until the marker has been clicked on.
map.on('click',(e) =>
    {
        var poppin = new mapboxgl.Popup()
            .setLngLat(pf.getLngLat())
            .setHTML("<h4>PF Chang's  " +
                "12071 Elm Creek Blvd.\n" +
                "Maple Grove, MN 55369</h4>")
            .addTo(map)
    })


//    Refactor your code to display at least three of your favorite restaurants with information about each.
    //    Create an array of objects with information about each restaurant to accomplish this.
    //    Use a .forEach() loop rather than a for loop.
// var arbys = new mapboxgl.Marker({
//     color: 'black',
// }).setLngLat([-93.4499407,45.0977])
//     .addTo(map)
//     var chick = new mapboxgl.Marker({
//         color: 'black',
//     }).setLngLat([-93.4319013, 45.0942304])
//         .addTo(map)
//
// var obj =

</script>
</body>
</html>